{"openapi":"3.1.0","info":{"title":"SaaS Clínicas","description":"API para SaaS de Gestión de Clínicas Especializadas","version":"0.1.0"},"paths":{"/api/v1/auth/register":{"post":{"tags":["Autenticación"],"summary":"Register","description":"Registra una nueva clínica y su usuario administrador.\nNo requiere autenticación.","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClinicRegisterRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["Autenticación"],"summary":"Login","description":"Autentica un usuario con email y contraseña.\nSi tiene MFA habilitado, retorna `requires_mfa=true` y un token temporal.","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/mfa/verify":{"post":{"tags":["Autenticación"],"summary":"Verify Mfa","description":"Verifica el código MFA/TOTP y emite tokens definitivos.","operationId":"verify_mfa_api_v1_auth_mfa_verify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MFAVerifyRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/refresh":{"post":{"tags":["Autenticación"],"summary":"Refresh Tokens","description":"Refresca un par de tokens usando el refresh token.","operationId":"refresh_tokens_api_v1_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/me":{"get":{"tags":["Autenticación"],"summary":"Get Me","description":"Retorna los datos del usuario autenticado.","operationId":"get_me_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserMe"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/mfa/setup":{"post":{"tags":["Autenticación"],"summary":"Setup Mfa","description":"Configura MFA/TOTP para el usuario autenticado. Retorna secreto y QR.","operationId":"setup_mfa_api_v1_auth_mfa_setup_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MFASetupResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/mfa/disable":{"post":{"tags":["Autenticación"],"summary":"Disable Mfa","description":"Desactiva MFA para el usuario autenticado.","operationId":"disable_mfa_api_v1_auth_mfa_disable_post","responses":{"204":{"description":"Successful Response"}},"security":[{"HTTPBearer":[]}]}},"/api/v1/clinic/me":{"get":{"tags":["Clínica"],"summary":"Get My Clinic","description":"Retorna los datos de la clinica del usuario autenticado.","operationId":"get_my_clinic_api_v1_clinic_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClinicResponse"}}}}},"security":[{"HTTPBearer":[]}]},"put":{"tags":["Clínica"],"summary":"Update My Clinic","description":"Actualiza los datos de la clinica del usuario autenticado.\nSolo accesible para super_admin y clinic_admin.","operationId":"update_my_clinic_api_v1_clinic_me_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClinicUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClinicResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/users":{"get":{"tags":["Usuarios"],"summary":"List Users","description":"Lista usuarios de la clinica con filtro opcional por rol.","operationId":"list_users_api_v1_users_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Size"}},{"name":"role","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/UserRole"},{"type":"null"}],"description":"Filtrar por rol","title":"Role"},"description":"Filtrar por rol"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Usuarios"],"summary":"Create User","description":"Crea un nuevo usuario en la clinica del administrador.","operationId":"create_user_api_v1_users_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}":{"put":{"tags":["Usuarios"],"summary":"Update User","description":"Actualiza datos de un usuario de la clinica.","operationId":"update_user_api_v1_users__user_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}/active":{"patch":{"tags":["Usuarios"],"summary":"Toggle User Active","description":"Activa o desactiva un usuario de la clinica.","operationId":"toggle_user_active_api_v1_users__user_id__active_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActiveToggle"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/patients":{"get":{"tags":["Pacientes"],"summary":"List Patients","description":"Lista pacientes de la clínica con paginación y búsqueda.\nTodos los roles pueden listar pacientes.","operationId":"list_patients_api_v1_patients_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Número de página","default":1,"title":"Page"},"description":"Número de página"},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Tamaño de página","default":20,"title":"Size"},"description":"Tamaño de página"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Buscar por nombre o apellido","title":"Search"},"description":"Buscar por nombre o apellido"},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filtrar por estado","title":"Is Active"},"description":"Filtrar por estado"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Pacientes"],"summary":"Create Patient","description":"Crea un nuevo paciente en la clínica.\nEl DNI y campos sensibles se cifran automáticamente.","operationId":"create_patient_api_v1_patients_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/patients/search":{"get":{"tags":["Pacientes"],"summary":"Search By Dni","description":"Busca un paciente por DNI en la clínica actual.\nRetorna null si no existe.","operationId":"search_by_dni_api_v1_patients_search_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"dni","in":"query","required":true,"schema":{"type":"string","minLength":8,"description":"DNI del paciente","title":"Dni"},"description":"DNI del paciente"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/PatientResponse"},{"type":"null"}],"title":"Response Search By Dni Api V1 Patients Search Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/patients/{patient_id}":{"get":{"tags":["Pacientes"],"summary":"Get Patient","description":"Obtiene el detalle de un paciente por ID.","operationId":"get_patient_api_v1_patients__patient_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"patient_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Patient Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Pacientes"],"summary":"Update Patient","description":"Actualiza un paciente existente.\nSolo se actualizan los campos enviados.","operationId":"update_patient_api_v1_patients__patient_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"patient_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Patient Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/appointments":{"get":{"tags":["Citas"],"summary":"List Appointments","description":"Lista citas de la clínica con filtros por doctor, paciente,\nestado y rango de fechas. Paginación incluida.","operationId":"list_appointments_api_v1_appointments_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Size"}},{"name":"doctor_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filtrar por doctor","title":"Doctor Id"},"description":"Filtrar por doctor"},{"name":"patient_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filtrar por paciente","title":"Patient Id"},"description":"Filtrar por paciente"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/AppointmentStatus"},{"type":"null"}],"description":"Filtrar por estado","title":"Status"},"description":"Filtrar por estado"},{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"Desde fecha (YYYY-MM-DD)","title":"Date From"},"description":"Desde fecha (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"Hasta fecha (YYYY-MM-DD)","title":"Date To"},"description":"Hasta fecha (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Citas"],"summary":"Create Appointment","description":"Crea una nueva cita. Valida automáticamente que no haya\nsolapamiento de horario para el doctor seleccionado.","operationId":"create_appointment_api_v1_appointments_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/appointments/agenda":{"get":{"tags":["Citas"],"summary":"Daily Agenda","description":"Agenda diaria de un doctor. Si no se especifica doctor_id,\nretorna la agenda del usuario autenticado (si es doctor).","operationId":"daily_agenda_api_v1_appointments_agenda_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date","in":"query","required":true,"schema":{"type":"string","format":"date","description":"Fecha (YYYY-MM-DD)","title":"Date"},"description":"Fecha (YYYY-MM-DD)"},{"name":"doctor_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Doctor (si no se envía, usa el usuario actual)","title":"Doctor Id"},"description":"Doctor (si no se envía, usa el usuario actual)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AppointmentResponse"},"title":"Response Daily Agenda Api V1 Appointments Agenda Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/appointments/availability":{"get":{"tags":["Citas"],"summary":"Get Availability","description":"Consulta los slots de tiempo disponibles para un doctor\nen una fecha específica. Basado en sus horarios configurados\ny citas existentes.","operationId":"get_availability_api_v1_appointments_availability_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"doctor_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","description":"ID del doctor","title":"Doctor Id"},"description":"ID del doctor"},{"name":"date","in":"query","required":true,"schema":{"type":"string","format":"date","description":"Fecha (YYYY-MM-DD)","title":"Date"},"description":"Fecha (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/appointments/{appointment_id}":{"get":{"tags":["Citas"],"summary":"Get Appointment","description":"Obtiene el detalle de una cita por ID.","operationId":"get_appointment_api_v1_appointments__appointment_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"appointment_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Appointment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Citas"],"summary":"Update Appointment","description":"Actualiza datos de una cita (horario, servicio, notas).\nSolo citas en estado scheduled o confirmed.","operationId":"update_appointment_api_v1_appointments__appointment_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"appointment_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Appointment Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/appointments/{appointment_id}/status":{"patch":{"tags":["Citas"],"summary":"Change Appointment Status","description":"Cambia el estado de una cita usando la state machine:\n\n- **scheduled** → confirmed, cancelled, no_show\n- **confirmed** → in_progress, cancelled, no_show\n- **in_progress** → completed\n- completed, cancelled, no_show → (estados terminales, sin transiciones)\n\nPara cancelar, opcionalmente enviar `cancellation_reason`.","operationId":"change_appointment_status_api_v1_appointments__appointment_id__status_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"appointment_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Appointment Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentStatusChange"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/schedules/{doctor_id}":{"get":{"tags":["Horarios de Doctores"],"summary":"Get Doctor Schedules","description":"Obtiene todos los horarios activos de un doctor.\nDoctores solo pueden ver sus propios horarios.","operationId":"get_doctor_schedules_api_v1_schedules__doctor_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"doctor_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Doctor Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DoctorScheduleResponse"},"title":"Response Get Doctor Schedules Api V1 Schedules  Doctor Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/schedules":{"post":{"tags":["Horarios de Doctores"],"summary":"Create Schedule","description":"Crea un bloque de horario para un doctor.\nSolo admin de clínica o super admin.","operationId":"create_schedule_api_v1_schedules_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DoctorScheduleCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DoctorScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/schedules/{schedule_id}":{"put":{"tags":["Horarios de Doctores"],"summary":"Update Schedule","description":"Actualiza un bloque de horario existente.","operationId":"update_schedule_api_v1_schedules__schedule_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Schedule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DoctorScheduleUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DoctorScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Horarios de Doctores"],"summary":"Delete Schedule","description":"Desactiva un bloque de horario (soft delete).","operationId":"delete_schedule_api_v1_schedules__schedule_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Schedule Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/booking/{clinic_id}/doctors":{"get":{"tags":["Reserva Pública"],"summary":"List Public Doctors","description":"Lista doctores disponibles de una clínica (endpoint público).\nSolo muestra nombre y especialidad, sin datos sensibles.","operationId":"list_public_doctors_api_v1_public_booking__clinic_id__doctors_get","parameters":[{"name":"clinic_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Clinic Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"},"title":"Response List Public Doctors Api V1 Public Booking  Clinic Id  Doctors Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/booking/{clinic_id}/availability":{"get":{"tags":["Reserva Pública"],"summary":"Public Availability","description":"Consulta slots disponibles de un doctor (endpoint público).\nNo requiere autenticación.","operationId":"public_availability_api_v1_public_booking__clinic_id__availability_get","parameters":[{"name":"clinic_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Clinic Id"}},{"name":"doctor_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","description":"ID del doctor","title":"Doctor Id"},"description":"ID del doctor"},{"name":"date","in":"query","required":true,"schema":{"type":"string","format":"date","description":"Fecha (YYYY-MM-DD)","title":"Date"},"description":"Fecha (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/booking/{clinic_id}/book":{"post":{"tags":["Reserva Pública"],"summary":"Public Book Appointment","description":"Reserva una cita desde el link público.\n\nFlujo:\n1. Busca al paciente por DNI en la clínica. Si no existe, lo crea.\n2. Valida disponibilidad del doctor (sin solapamiento).\n3. Crea la cita en estado `scheduled`.","operationId":"public_book_appointment_api_v1_public_booking__clinic_id__book_post","parameters":[{"name":"clinic_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Clinic Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicBookingRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicBookingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/records":{"post":{"tags":["Historia Clínica (HCE)"],"summary":"Create Record","description":"Crea un nuevo registro clínico (INSERT-only).\nSolo doctores y super_admin.","operationId":"create_record_api_v1_records_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MedicalRecordCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MedicalRecordResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Historia Clínica (HCE)"],"summary":"List Patient Records","description":"Historial clínico de un paciente (paginado).\nReceptionist NO tiene acceso.","operationId":"list_patient_records_api_v1_records_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"patient_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","description":"ID del paciente","title":"Patient Id"},"description":"ID del paciente"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Size"}},{"name":"record_type","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/RecordType"},{"type":"null"}],"description":"Filtrar por tipo","title":"Record Type"},"description":"Filtrar por tipo"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MedicalRecordListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/records/{record_id}":{"get":{"tags":["Historia Clínica (HCE)"],"summary":"Get Record","description":"Detalle de un registro clínico. Receptionist NO tiene acceso.","operationId":"get_record_api_v1_records__record_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"record_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Record Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MedicalRecordResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/records/{record_id}/sign":{"post":{"tags":["Historia Clínica (HCE)"],"summary":"Sign Record","description":"Firma un registro clínico. **ACCIÓN IRREVERSIBLE**.\nUna vez firmado, el registro no puede ser modificado.\nSolo el doctor que creó el registro puede firmarlo.","operationId":"sign_record_api_v1_records__record_id__sign_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"record_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Record Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignRecordRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MedicalRecordResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cie10/search":{"get":{"tags":["CIE-10"],"summary":"Search Cie10","description":"Busca códigos CIE-10 por texto en código o descripción.\nSoporta filtro por categoría (Odontología, Oftalmología, etc.).","operationId":"search_cie10_api_v1_cie10_search_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":2,"description":"Texto a buscar (código o descripción)","title":"Q"},"description":"Texto a buscar (código o descripción)"},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrar por categoría","title":"Category"},"description":"Filtrar por categoría"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CIE10SearchResult"},"title":"Response Search Cie10 Api V1 Cie10 Search Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cie10/categories":{"get":{"tags":["CIE-10"],"summary":"List Categories","description":"Lista todas las categorías disponibles en el catálogo CIE-10.","operationId":"list_categories_api_v1_cie10_categories_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"type":"string"},"type":"array","title":"Response List Categories Api V1 Cie10 Categories Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/cie10/{code}":{"get":{"tags":["CIE-10"],"summary":"Get Cie10 Code","description":"Obtiene un código CIE-10 específico por su código.","operationId":"get_cie10_code_api_v1_cie10__code__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string","title":"Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/CIE10SearchResult"},{"type":"null"}],"title":"Response Get Cie10 Code Api V1 Cie10  Code  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dental-charts":{"post":{"tags":["Odontograma"],"summary":"Create Dental Entry","description":"Crea una nueva entrada en el odontograma.\nSolo doctores y super_admin.","operationId":"create_dental_entry_api_v1_dental_charts_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DentalChartCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DentalChartResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/dental-charts/patient/{patient_id}":{"get":{"tags":["Odontograma"],"summary":"Get Full Dental Chart","description":"Odontograma completo: estado actual de todos los dientes\ndel paciente (última entrada por diente).","operationId":"get_full_dental_chart_api_v1_dental_charts_patient__patient_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"patient_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Patient Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FullDentalChartResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dental-charts/patient/{patient_id}/tooth/{tooth_number}":{"get":{"tags":["Odontograma"],"summary":"Get Tooth History","description":"Historial de tratamientos de un diente específico.\nOrdenado del más reciente al más antiguo.","operationId":"get_tooth_history_api_v1_dental_charts_patient__patient_id__tooth__tooth_number__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"patient_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Patient Id"}},{"name":"tooth_number","in":"path","required":true,"schema":{"type":"integer","title":"Tooth Number"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DentalChartResponse"},"title":"Response Get Tooth History Api V1 Dental Charts Patient  Patient Id  Tooth  Tooth Number  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/prenatal":{"post":{"tags":["Control Prenatal"],"summary":"Create Prenatal Visit","description":"Crea un nuevo registro de control prenatal.\nDatos según estándar CLAP/SIP.","operationId":"create_prenatal_visit_api_v1_prenatal_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrenatalVisitCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrenatalVisitResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/prenatal/{visit_id}":{"get":{"tags":["Control Prenatal"],"summary":"Get Prenatal Visit","description":"Detalle de una visita prenatal.","operationId":"get_prenatal_visit_api_v1_prenatal__visit_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"visit_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Visit Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrenatalVisitResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/prenatal/patient/{patient_id}":{"get":{"tags":["Control Prenatal"],"summary":"Get Prenatal History","description":"Historial prenatal completo de una paciente.\nOrdenado por semana gestacional ascendente.","operationId":"get_prenatal_history_api_v1_prenatal_patient__patient_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"patient_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Patient Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrenatalHistoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ophthalmic":{"post":{"tags":["Oftalmología"],"summary":"Create Ophthalmic Exam","description":"Crea un nuevo examen oftalmológico.\nIncluye refracción, PIO y agudeza visual por ojo (OD/OS).","operationId":"create_ophthalmic_exam_api_v1_ophthalmic_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OphthalmicExamCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OphthalmicExamResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ophthalmic/{exam_id}":{"get":{"tags":["Oftalmología"],"summary":"Get Ophthalmic Exam","description":"Detalle de un examen oftalmológico.","operationId":"get_ophthalmic_exam_api_v1_ophthalmic__exam_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"exam_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Exam Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OphthalmicExamResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ophthalmic/patient/{patient_id}":{"get":{"tags":["Oftalmología"],"summary":"Get Ophthalmic History","description":"Historial oftalmológico completo de un paciente.\nOpcionalmente filtrar por ojo (OD / OS).","operationId":"get_ophthalmic_history_api_v1_ophthalmic_patient__patient_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"patient_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Patient Id"}},{"name":"eye","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/EyeSide"},{"type":"null"}],"description":"Filtrar por ojo: OD u OS","title":"Eye"},"description":"Filtrar por ojo: OD u OS"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OphthalmicHistoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/invoices":{"post":{"tags":["Facturación SUNAT"],"summary":"Create Invoice","description":"Crea y emite un comprobante electrónico desde el frontend.\nAcepta formato simplificado (invoice_type, patient_id) y resuelve\nautomáticamente los datos SUNAT del paciente.","operationId":"create_invoice_api_v1_invoices_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceCreateSimple"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Facturación SUNAT"],"summary":"List Invoices","description":"Lista comprobantes de la clínica con filtros.\nAcepta filtros amigables del frontend (status, invoice_type).","operationId":"list_invoices_api_v1_invoices_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Size"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrar por estado (pending, accepted, etc.)","title":"Status"},"description":"Filtrar por estado (pending, accepted, etc.)"},{"name":"invoice_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrar por tipo (factura, boleta, nota_credito, nota_debito)","title":"Invoice Type"},"description":"Filtrar por tipo (factura, boleta, nota_credito, nota_debito)"},{"name":"patient_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filtrar por paciente","title":"Patient Id"},"description":"Filtrar por paciente"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Buscar por texto","title":"Search"},"description":"Buscar por texto"},{"name":"sort_by","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Campo para ordenar","default":"created_at","title":"Sort By"},"description":"Campo para ordenar"},{"name":"sort_order","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Orden: asc o desc","default":"desc","title":"Sort Order"},"description":"Orden: asc o desc"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/invoices/{invoice_id}":{"get":{"tags":["Facturación SUNAT"],"summary":"Get Invoice","description":"Detalle de un comprobante con su estado SUNAT e ítems.","operationId":"get_invoice_api_v1_invoices__invoice_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Invoice Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/invoices/{invoice_id}/retry":{"post":{"tags":["Facturación SUNAT"],"summary":"Retry Invoice","description":"Reintenta la emisión a SUNAT de un comprobante con estado\n`pending`, `queued` o `error`.","operationId":"retry_invoice_api_v1_invoices__invoice_id__retry_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Invoice Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/invoices/{invoice_id}/void":{"post":{"tags":["Facturación SUNAT"],"summary":"Void Invoice","description":"Anula un comprobante aceptado en SUNAT.\nRequiere motivo de anulación. Solo admins.","operationId":"void_invoice_api_v1_invoices__invoice_id__void_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Invoice Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceVoidRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reports/dashboard":{"get":{"tags":["Reportes"],"summary":"Get Dashboard","description":"KPIs principales del dashboard:\ncitas del día, ingresos del mes, pacientes nuevos, tasa de no-show.","operationId":"get_dashboard_api_v1_reports_dashboard_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardKPIs"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/reports/revenue":{"get":{"tags":["Reportes"],"summary":"Get Revenue Report","description":"Reporte de ingresos agrupado por mes.\nPor defecto muestra los últimos 6 meses.","operationId":"get_revenue_report_api_v1_reports_revenue_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_from","in":"query","required":false,"schema":{"type":"string","format":"date","description":"Desde (YYYY-MM-DD). Por defecto: inicio del mes actual","title":"Date From"},"description":"Desde (YYYY-MM-DD). Por defecto: inicio del mes actual"},{"name":"date_to","in":"query","required":false,"schema":{"type":"string","format":"date","description":"Hasta (YYYY-MM-DD). Por defecto: hoy","title":"Date To"},"description":"Hasta (YYYY-MM-DD). Por defecto: hoy"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevenueReportResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reports/appointments":{"get":{"tags":["Reportes"],"summary":"Get Appointment Stats","description":"Estadísticas de citas: total, por estado, por doctor,\npor tipo de servicio, tasa de no-show.","operationId":"get_appointment_stats_api_v1_reports_appointments_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_from","in":"query","required":false,"schema":{"type":"string","format":"date","description":"Desde (YYYY-MM-DD). Por defecto: inicio del mes actual","title":"Date From"},"description":"Desde (YYYY-MM-DD). Por defecto: inicio del mes actual"},{"name":"date_to","in":"query","required":false,"schema":{"type":"string","format":"date","description":"Hasta (YYYY-MM-DD). Por defecto: hoy","title":"Date To"},"description":"Hasta (YYYY-MM-DD). Por defecto: hoy"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentStatsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cash-register/sessions/current":{"get":{"tags":["Caja"],"summary":"Get Current Session","description":"Retorna la sesión de caja abierta (o null si no hay).","operationId":"get_current_session_api_v1_cash_register_sessions_current_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/CashSessionResponse"},{"type":"null"}],"title":"Response Get Current Session Api V1 Cash Register Sessions Current Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/cash-register/sessions":{"post":{"tags":["Caja"],"summary":"Open Session","description":"Abre una nueva sesión de caja con fondo inicial.","operationId":"open_session_api_v1_cash_register_sessions_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CashSessionOpen"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CashSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Caja"],"summary":"List Sessions","description":"Lista sesiones de caja con paginación y filtro de estado.","operationId":"list_sessions_api_v1_cash_register_sessions_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Size"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/CashSessionStatus"},{"type":"null"}],"title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CashSessionListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cash-register/sessions/{session_id}/close":{"post":{"tags":["Caja"],"summary":"Close Session","description":"Cierra una sesión de caja con cuadre de montos.","operationId":"close_session_api_v1_cash_register_sessions__session_id__close_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CashSessionClose"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CashSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cash-register/sessions/{session_id}/summary":{"get":{"tags":["Caja"],"summary":"Get Session Summary","description":"Retorna el resumen agregado de una sesión de caja.","operationId":"get_session_summary_api_v1_cash_register_sessions__session_id__summary_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyCashSummary"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cash-register/movements":{"post":{"tags":["Caja"],"summary":"Create Movement","description":"Registra un movimiento de ingreso o egreso en la caja abierta.","operationId":"create_movement_api_v1_cash_register_movements_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CashMovementCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CashMovementResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Caja"],"summary":"List Movements","description":"Lista movimientos de caja con filtros opcionales.","operationId":"list_movements_api_v1_cash_register_movements_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filtrar por sesión","title":"Session Id"},"description":"Filtrar por sesión"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Size"}},{"name":"movement_type","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/MovementType"},{"type":"null"}],"title":"Movement Type"}},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/MovementCategory"},{"type":"null"}],"title":"Category"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CashMovementListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/logistica/suppliers":{"post":{"tags":["Logística"],"summary":"Create Supplier","description":"Crea un nuevo proveedor.","operationId":"create_supplier_api_v1_logistica_suppliers_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Logística"],"summary":"List Suppliers","description":"Lista proveedores con paginación y filtros.","operationId":"list_suppliers_api_v1_logistica_suppliers_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Size"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Buscar por RUC o razón social","title":"Search"},"description":"Buscar por RUC o razón social"},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/logistica/suppliers/{supplier_id}":{"get":{"tags":["Logística"],"summary":"Get Supplier","description":"Detalle de un proveedor.","operationId":"get_supplier_api_v1_logistica_suppliers__supplier_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"supplier_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Supplier Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Logística"],"summary":"Update Supplier","description":"Actualiza un proveedor.","operationId":"update_supplier_api_v1_logistica_suppliers__supplier_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"supplier_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Supplier Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/logistica/categories":{"get":{"tags":["Logística"],"summary":"List Categories","description":"Lista todas las categorías de la clínica.","operationId":"list_categories_api_v1_logistica_categories_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryListResponse"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Logística"],"summary":"Create Category","description":"Crea una categoría de artículo.","operationId":"create_category_api_v1_logistica_categories_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/logistica/categories/{category_id}":{"delete":{"tags":["Logística"],"summary":"Delete Category","description":"Elimina una categoría (sin artículos vinculados).","operationId":"delete_category_api_v1_logistica_categories__category_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"category_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Category Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/logistica/items":{"post":{"tags":["Logística"],"summary":"Create Item","description":"Crea un nuevo artículo en el inventario.","operationId":"create_item_api_v1_logistica_items_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventoryItemCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventoryItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Logística"],"summary":"List Items","description":"Lista artículos con paginación y filtros.","operationId":"list_items_api_v1_logistica_items_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Size"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Buscar por código o nombre","title":"Search"},"description":"Buscar por código o nombre"},{"name":"category_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Category Id"}},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},{"name":"low_stock","in":"query","required":false,"schema":{"type":"boolean","description":"Solo artículos con stock bajo","default":false,"title":"Low Stock"},"description":"Solo artículos con stock bajo"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventoryItemListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/logistica/items/{item_id}":{"get":{"tags":["Logística"],"summary":"Get Item","description":"Detalle de un artículo.","operationId":"get_item_api_v1_logistica_items__item_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventoryItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Logística"],"summary":"Update Item","description":"Actualiza un artículo.","operationId":"update_item_api_v1_logistica_items__item_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventoryItemUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventoryItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/logistica/movements":{"post":{"tags":["Logística"],"summary":"Create Movement","description":"Registra un movimiento de stock (entrada, salida o ajuste).","operationId":"create_movement_api_v1_logistica_movements_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StockMovementCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StockMovementResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Logística"],"summary":"List Movements","description":"Lista movimientos de stock con filtros opcionales.","operationId":"list_movements_api_v1_logistica_movements_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Size"}},{"name":"item_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filtrar por artículo (Kardex)","title":"Item Id"},"description":"Filtrar por artículo (Kardex)"},{"name":"movement_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"entry, exit, adjustment","title":"Movement Type"},"description":"entry, exit, adjustment"},{"name":"reason","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StockMovementListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/logistica/summary":{"get":{"tags":["Logística"],"summary":"Get Inventory Summary","description":"Resumen del inventario: totales, stock bajo, sin stock.","operationId":"get_inventory_summary_api_v1_logistica_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventorySummary"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/logistica/low-stock":{"get":{"tags":["Logística"],"summary":"Get Low Stock Items","description":"Artículos con stock bajo o sin stock.","operationId":"get_low_stock_items_api_v1_logistica_low_stock_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/LowStockItem"},"type":"array","title":"Response Get Low Stock Items Api V1 Logistica Low Stock Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/services":{"get":{"tags":["Servicios"],"summary":"List Services","description":"Lista paginada de servicios de la clínica.","operationId":"list_services_api_v1_services_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Size"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Buscar por nombre","title":"Search"},"description":"Buscar por nombre"},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filtrar por estado activo","title":"Is Active"},"description":"Filtrar por estado activo"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Servicios"],"summary":"Create Service","description":"Crear un nuevo servicio (solo admins).","operationId":"create_service_api_v1_services_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/services/active":{"get":{"tags":["Servicios"],"summary":"Get Active Services","description":"Todos los servicios activos (sin paginación, para dropdowns).","operationId":"get_active_services_api_v1_services_active_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ServiceResponse"},"type":"array","title":"Response Get Active Services Api V1 Services Active Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/services/{service_id}":{"get":{"tags":["Servicios"],"summary":"Get Service","description":"Detalle de un servicio.","operationId":"get_service_api_v1_services__service_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"service_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Service Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Servicios"],"summary":"Update Service","description":"Actualizar un servicio (solo admins).","operationId":"update_service_api_v1_services__service_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"service_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Service Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Servicios"],"summary":"Delete Service","description":"Desactivar un servicio (soft delete, solo admins).","operationId":"delete_service_api_v1_services__service_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"service_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Service Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sync":{"post":{"tags":["Sincronización Offline"],"summary":"Sincronizar operaciones offline","description":"Recibe un batch de operaciones realizadas offline y las procesa. Si el batch tiene más de 50 operaciones, considerar usar /sync/async.","operationId":"sync_batch_api_v1_sync_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncBatch"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/sync/async":{"post":{"tags":["Sincronización Offline"],"summary":"Enviar batch para procesamiento asíncrono","description":"Para batches grandes (>50 operaciones). El batch se encola en Celery y se puede consultar el estado.","operationId":"sync_batch_async_api_v1_sync_async_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncBatch"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Sync Batch Async Api V1 Sync Async Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/sync/status":{"get":{"tags":["Sincronización Offline"],"summary":"Estado de sincronización de un dispositivo","description":"Retorna el estado actual de sincronización, último sync exitoso y batches pendientes.","operationId":"sync_status_api_v1_sync_status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"device_id","in":"query","required":true,"schema":{"type":"string","minLength":1,"maxLength":100,"title":"Device Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sync/batch/{batch_id}":{"get":{"tags":["Sincronización Offline"],"summary":"Consultar estado de un batch específico","description":"Retorna el estado y resultado de un batch de sincronización.","operationId":"get_batch_status_api_v1_sync_batch__batch_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"batch_id","in":"path","required":true,"schema":{"type":"string","title":"Batch Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Batch Status Api V1 Sync Batch  Batch Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reniec/dni/{dni}":{"get":{"tags":["RENIEC"],"summary":"Consultar DNI en RENIEC","description":"Consulta un DNI de 8 dígitos en la base de datos de RENIEC vía apis.net.pe. Resultados cacheados en memoria (1 hora).","operationId":"get_dni_info_api_v1_reniec_dni__dni__get","parameters":[{"name":"dni","in":"path","required":true,"schema":{"type":"string","minLength":8,"maxLength":8,"pattern":"^\\d{8}$","description":"DNI de 8 dígitos","examples":["12345678"],"title":"Dni"},"description":"DNI de 8 dígitos"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReniecDNIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/organizations/":{"get":{"tags":["Organizaciones"],"summary":"Listar organizaciones","description":"Lista todas las organizaciones. Solo super_admin.","operationId":"list_organizations_api_v1_organizations__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/OrganizationResponse"},"type":"array","title":"Response List Organizations Api V1 Organizations  Get"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Organizaciones"],"summary":"Crear organización","description":"Crea una nueva organización (grupo empresarial). Solo super_admin.","operationId":"create_organization_api_v1_organizations__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/organizations/{org_id}":{"get":{"tags":["Organizaciones"],"summary":"Obtener organización con sedes","description":"Obtiene una organización con todas sus sedes. super_admin u org_admin.","operationId":"get_organization_api_v1_organizations__org_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Org Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationWithClinicsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Organizaciones"],"summary":"Actualizar organización","operationId":"update_organization_api_v1_organizations__org_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Org Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/organizations/{org_id}/clinics":{"post":{"tags":["Organizaciones"],"summary":"Agregar sede a organización","description":"Agrega una nueva sede o vincula una clínica existente a la organización.","operationId":"add_clinic_to_org_api_v1_organizations__org_id__clinics_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Org Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddClinicToOrgRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClinicBranchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Organizaciones"],"summary":"Listar sedes de una organización","operationId":"list_org_clinics_api_v1_organizations__org_id__clinics_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Org Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ClinicBranchResponse"},"title":"Response List Org Clinics Api V1 Organizations  Org Id  Clinics Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/organizations/access":{"post":{"tags":["Organizaciones"],"summary":"Otorgar acceso a sede","description":"Otorga acceso a un usuario a una sede con un rol específico.","operationId":"grant_access_api_v1_organizations_access_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserClinicAccessCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserClinicAccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/organizations/access/{user_id}/{clinic_id}":{"delete":{"tags":["Organizaciones"],"summary":"Revocar acceso a sede","operationId":"revoke_access_api_v1_organizations_access__user_id___clinic_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}},{"name":"clinic_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Clinic Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/organizations/my-clinics":{"get":{"tags":["Organizaciones"],"summary":"Mis sedes accesibles","description":"Lista todas las sedes a las que el usuario tiene acceso.","operationId":"my_clinics_api_v1_organizations_my_clinics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/organizations/switch-clinic":{"post":{"tags":["Organizaciones"],"summary":"Cambiar sede activa","description":"Genera nuevos tokens JWT con la sede seleccionada. El usuario debe tener acceso a la sede destino.","operationId":"switch_clinic_api_v1_organizations_switch_clinic_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwitchClinicRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwitchClinicResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Endpoint de health check para monitoreo.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"ActiveToggle":{"properties":{"is_active":{"type":"boolean","title":"Is Active"}},"type":"object","required":["is_active"],"title":"ActiveToggle"},"AddClinicToOrgRequest":{"properties":{"clinic_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Clinic Id","description":"ID de clínica existente para vincular"},"name":{"anyOf":[{"type":"string","maxLength":200,"minLength":2},{"type":"null"}],"title":"Name","description":"Nombre para nueva sede"},"branch_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Branch Name","description":"Nombre de la sucursal"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"specialty_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Specialty Type"}},"type":"object","title":"AddClinicToOrgRequest","description":"Agregar una clínica existente o crear nueva sede en la organización."},"AppointmentCreate":{"properties":{"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"doctor_id":{"type":"string","format":"uuid","title":"Doctor Id"},"start_time":{"type":"string","format":"date-time","title":"Start Time"},"end_time":{"type":"string","format":"date-time","title":"End Time"},"service_type":{"type":"string","maxLength":100,"minLength":2,"title":"Service Type"},"notes":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Notes"}},"type":"object","required":["patient_id","doctor_id","start_time","end_time","service_type"],"title":"AppointmentCreate"},"AppointmentDoctorEmbed":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"specialty":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Specialty"},"cmp_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cmp Number"}},"type":"object","required":["id","first_name","last_name"],"title":"AppointmentDoctorEmbed","description":"Datos del doctor embebidos en la respuesta de cita."},"AppointmentListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/AppointmentResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"AppointmentListResponse","description":"Respuesta paginada de listado de citas."},"AppointmentPatientEmbed":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"dni":{"type":"string","title":"Dni"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"}},"type":"object","required":["id","dni","first_name","last_name"],"title":"AppointmentPatientEmbed","description":"Datos del paciente embebidos en la respuesta de cita."},"AppointmentResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"doctor_id":{"type":"string","format":"uuid","title":"Doctor Id"},"start_time":{"type":"string","format":"date-time","title":"Start Time"},"end_time":{"type":"string","format":"date-time","title":"End Time"},"status":{"$ref":"#/components/schemas/AppointmentStatus"},"service_type":{"type":"string","title":"Service Type"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"cancellation_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancellation Reason"},"cancelled_by":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Cancelled By"},"patient_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Patient Name"},"doctor_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Doctor Name"},"patient":{"anyOf":[{"$ref":"#/components/schemas/AppointmentPatientEmbed"},{"type":"null"}]},"doctor":{"anyOf":[{"$ref":"#/components/schemas/AppointmentDoctorEmbed"},{"type":"null"}]},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","clinic_id","patient_id","doctor_id","start_time","end_time","status","service_type","created_at","updated_at"],"title":"AppointmentResponse"},"AppointmentStatsResponse":{"properties":{"date_from":{"type":"string","format":"date","title":"Date From"},"date_to":{"type":"string","format":"date","title":"Date To"},"total":{"type":"integer","title":"Total","default":0},"by_status":{"items":{"$ref":"#/components/schemas/AppointmentStatusCount"},"type":"array","title":"By Status","default":[]},"by_doctor":{"items":{"type":"object"},"type":"array","title":"By Doctor","description":"Conteo por doctor: [{doctor_name, count}]","default":[]},"by_service_type":{"items":{"type":"object"},"type":"array","title":"By Service Type","description":"Conteo por servicio: [{service_type, count}]","default":[]},"no_show_rate":{"type":"number","title":"No Show Rate","description":"Tasa de no-show (%)","default":0.0}},"type":"object","required":["date_from","date_to"],"title":"AppointmentStatsResponse","description":"Estadísticas de citas por período."},"AppointmentStatus":{"type":"string","enum":["scheduled","confirmed","in_progress","completed","no_show","cancelled"],"title":"AppointmentStatus","description":"Estados de una cita médica."},"AppointmentStatusChange":{"properties":{"status":{"$ref":"#/components/schemas/AppointmentStatus"},"cancellation_reason":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Cancellation Reason"}},"type":"object","required":["status"],"title":"AppointmentStatusChange","description":"Schema para cambiar el estado de una cita."},"AppointmentStatusCount":{"properties":{"status":{"type":"string","title":"Status"},"count":{"type":"integer","title":"Count"}},"type":"object","required":["status","count"],"title":"AppointmentStatusCount","description":"Conteo de citas por estado."},"AppointmentUpdate":{"properties":{"start_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Time"},"end_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Time"},"service_type":{"anyOf":[{"type":"string","maxLength":100,"minLength":2},{"type":"null"}],"title":"Service Type"},"notes":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Notes"}},"type":"object","title":"AppointmentUpdate"},"AvailabilityResponse":{"properties":{"doctor_id":{"type":"string","format":"uuid","title":"Doctor Id"},"doctor_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Doctor Name"},"date":{"type":"string","format":"date","title":"Date"},"slots":{"items":{"$ref":"#/components/schemas/TimeSlot"},"type":"array","title":"Slots"}},"type":"object","required":["doctor_id","date","slots"],"title":"AvailabilityResponse","description":"Respuesta con slots disponibles para un doctor en una fecha."},"CIE10SearchResult":{"properties":{"code":{"type":"string","title":"Code"},"description":{"type":"string","title":"Description"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"}},"type":"object","required":["code","description"],"title":"CIE10SearchResult","description":"Resultado de búsqueda CIE-10."},"CashMovementCreate":{"properties":{"movement_type":{"$ref":"#/components/schemas/MovementType"},"category":{"$ref":"#/components/schemas/MovementCategory"},"payment_method":{"$ref":"#/components/schemas/PaymentMethod","default":"cash"},"amount":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string"}],"title":"Amount","description":"Monto (siempre positivo)"},"description":{"type":"string","maxLength":500,"minLength":2,"title":"Description"},"reference":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Reference"},"invoice_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Invoice Id"},"patient_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Patient Id"},"notes":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Notes"}},"type":"object","required":["movement_type","category","amount","description"],"title":"CashMovementCreate","description":"Request para registrar un movimiento de caja."},"CashMovementListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/CashMovementResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"CashMovementListResponse","description":"Respuesta paginada de movimientos de caja."},"CashMovementResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"session_id":{"type":"string","format":"uuid","title":"Session Id"},"created_by":{"type":"string","format":"uuid","title":"Created By"},"movement_type":{"$ref":"#/components/schemas/MovementType"},"category":{"$ref":"#/components/schemas/MovementCategory"},"payment_method":{"$ref":"#/components/schemas/PaymentMethod"},"amount":{"type":"string","title":"Amount"},"description":{"type":"string","title":"Description"},"reference":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reference"},"invoice_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Invoice Id"},"patient_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Patient Id"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","clinic_id","session_id","created_by","movement_type","category","payment_method","amount","description","created_at"],"title":"CashMovementResponse","description":"Respuesta de un movimiento de caja."},"CashSessionClose":{"properties":{"actual_closing_amount":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string"}],"title":"Actual Closing Amount","description":"Monto real contado"},"notes":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Notes"}},"type":"object","required":["actual_closing_amount"],"title":"CashSessionClose","description":"Request para cerrar una sesión de caja."},"CashSessionListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/CashSessionResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"CashSessionListResponse","description":"Respuesta paginada de sesiones de caja."},"CashSessionOpen":{"properties":{"opening_amount":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string"}],"title":"Opening Amount","description":"Monto de fondo inicial"},"notes":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Notes"}},"type":"object","required":["opening_amount"],"title":"CashSessionOpen","description":"Request para abrir una sesión de caja."},"CashSessionResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"opened_by":{"type":"string","format":"uuid","title":"Opened By"},"closed_by":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Closed By"},"status":{"$ref":"#/components/schemas/CashSessionStatus"},"opening_amount":{"type":"string","title":"Opening Amount"},"expected_closing_amount":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expected Closing Amount"},"actual_closing_amount":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Actual Closing Amount"},"difference":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Difference"},"total_income":{"type":"string","title":"Total Income","default":"0"},"total_expense":{"type":"string","title":"Total Expense","default":"0"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"opened_at":{"type":"string","format":"date-time","title":"Opened At"},"closed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Closed At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","clinic_id","opened_by","status","opening_amount","opened_at","created_at","updated_at"],"title":"CashSessionResponse","description":"Respuesta de una sesión de caja."},"CashSessionStatus":{"type":"string","enum":["open","closed"],"title":"CashSessionStatus","description":"Estado de la sesión de caja."},"CategoryCreate":{"properties":{"name":{"type":"string","maxLength":200,"minLength":2,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","required":["name"],"title":"CategoryCreate"},"CategoryListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/CategoryResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"CategoryListResponse"},"CategoryResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","clinic_id","name","created_at"],"title":"CategoryResponse"},"ClinicBranchResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"branch_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Branch Name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"is_active":{"type":"boolean","title":"Is Active"}},"type":"object","required":["id","name","is_active"],"title":"ClinicBranchResponse","description":"Respuesta resumida de una sede/sucursal."},"ClinicLoginData":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"ruc":{"type":"string","title":"Ruc"},"specialty_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Specialty Type"},"logo_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Logo Url"}},"type":"object","required":["id","name","ruc"],"title":"ClinicLoginData"},"ClinicRegisterRequest":{"properties":{"clinic_name":{"type":"string","maxLength":200,"minLength":2,"title":"Clinic Name"},"ruc":{"type":"string","maxLength":11,"minLength":11,"pattern":"^\\d{11}$","title":"Ruc"},"clinic_phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Clinic Phone"},"clinic_address":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Clinic Address"},"specialty_type":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Specialty Type"},"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","maxLength":128,"minLength":8,"title":"Password"},"first_name":{"type":"string","maxLength":100,"minLength":2,"title":"First Name"},"last_name":{"type":"string","maxLength":100,"minLength":2,"title":"Last Name"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone"}},"type":"object","required":["clinic_name","ruc","email","password","first_name","last_name"],"title":"ClinicRegisterRequest","description":"Registro inicial: crea clínica + usuario admin."},"ClinicResponse":{"properties":{"name":{"type":"string","maxLength":200,"minLength":2,"title":"Name"},"ruc":{"type":"string","maxLength":11,"minLength":11,"pattern":"^\\d{11}$","title":"Ruc"},"address":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Address"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Email"},"specialty_type":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Specialty Type"},"timezone":{"type":"string","maxLength":50,"title":"Timezone","default":"America/Lima"},"id":{"type":"string","format":"uuid","title":"Id"},"logo_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Logo Url"},"settings":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Settings"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["name","ruc","id","is_active","created_at","updated_at"],"title":"ClinicResponse"},"ClinicUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":200,"minLength":2},{"type":"null"}],"title":"Name"},"address":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Address"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Email"},"specialty_type":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Specialty Type"},"timezone":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Timezone"},"logo_url":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Logo Url"},"settings":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Settings"}},"type":"object","title":"ClinicUpdate"},"DailyCashSummary":{"properties":{"session_id":{"type":"string","format":"uuid","title":"Session Id"},"status":{"type":"string","title":"Status"},"opening_amount":{"type":"string","title":"Opening Amount"},"total_income":{"type":"string","title":"Total Income"},"total_expense":{"type":"string","title":"Total Expense"},"balance":{"type":"string","title":"Balance"},"income_by_method":{"additionalProperties":{"type":"string"},"type":"object","title":"Income By Method"},"expense_by_category":{"additionalProperties":{"type":"string"},"type":"object","title":"Expense By Category"},"movement_count":{"type":"integer","title":"Movement Count"}},"type":"object","required":["session_id","status","opening_amount","total_income","total_expense","balance","income_by_method","expense_by_category","movement_count"],"title":"DailyCashSummary","description":"Resumen de la sesión de caja."},"DashboardKPIs":{"properties":{"appointments_today":{"type":"integer","title":"Appointments Today","default":0},"appointments_pending":{"type":"integer","title":"Appointments Pending","default":0},"appointments_completed_today":{"type":"integer","title":"Appointments Completed Today","default":0},"no_show_rate_month":{"type":"number","title":"No Show Rate Month","description":"Tasa de no-show del mes (%)","default":0.0},"total_patients":{"type":"integer","title":"Total Patients","default":0},"new_patients_month":{"type":"integer","title":"New Patients Month","default":0},"revenue_today":{"type":"string","title":"Revenue Today","default":"0.00"},"revenue_month":{"type":"string","title":"Revenue Month","default":"0.00"},"invoices_pending":{"type":"integer","title":"Invoices Pending","default":0},"period_start":{"type":"string","format":"date","title":"Period Start"},"period_end":{"type":"string","format":"date","title":"Period End"}},"type":"object","required":["period_start","period_end"],"title":"DashboardKPIs","description":"KPIs principales del dashboard."},"DentalChartCreate":{"properties":{"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"record_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Record Id"},"tooth_number":{"type":"integer","title":"Tooth Number","description":"Número FDI del diente"},"surfaces":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Surfaces","description":"Superficies afectadas: ['V','O','M','D','L']"},"condition":{"$ref":"#/components/schemas/ToothCondition"},"treatment":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Treatment"},"notes":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Notes"}},"type":"object","required":["patient_id","tooth_number","condition"],"title":"DentalChartCreate"},"DentalChartResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"record_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Record Id"},"doctor_id":{"type":"string","format":"uuid","title":"Doctor Id"},"tooth_number":{"type":"integer","title":"Tooth Number"},"surfaces":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Surfaces"},"condition":{"$ref":"#/components/schemas/ToothCondition"},"treatment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Treatment"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"doctor_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Doctor Name"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","clinic_id","patient_id","doctor_id","tooth_number","condition","created_at"],"title":"DentalChartResponse"},"DoctorScheduleCreate":{"properties":{"doctor_id":{"type":"string","format":"uuid","title":"Doctor Id"},"day_of_week":{"type":"integer","maximum":6.0,"minimum":0.0,"title":"Day Of Week","description":"0=Lunes ... 6=Domingo"},"start_time":{"type":"string","format":"time","title":"Start Time"},"end_time":{"type":"string","format":"time","title":"End Time"},"slot_duration_minutes":{"type":"integer","maximum":120.0,"minimum":10.0,"title":"Slot Duration Minutes","default":30}},"type":"object","required":["doctor_id","day_of_week","start_time","end_time"],"title":"DoctorScheduleCreate"},"DoctorScheduleResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"doctor_id":{"type":"string","format":"uuid","title":"Doctor Id"},"day_of_week":{"type":"integer","title":"Day Of Week"},"day_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Day Name"},"start_time":{"type":"string","format":"time","title":"Start Time"},"end_time":{"type":"string","format":"time","title":"End Time"},"slot_duration_minutes":{"type":"integer","title":"Slot Duration Minutes"},"is_active":{"type":"boolean","title":"Is Active"}},"type":"object","required":["id","clinic_id","doctor_id","day_of_week","start_time","end_time","slot_duration_minutes","is_active"],"title":"DoctorScheduleResponse"},"DoctorScheduleUpdate":{"properties":{"start_time":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Start Time"},"end_time":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"End Time"},"slot_duration_minutes":{"anyOf":[{"type":"integer","maximum":120.0,"minimum":10.0},{"type":"null"}],"title":"Slot Duration Minutes"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"DoctorScheduleUpdate"},"EyeSide":{"type":"string","enum":["OD","OS"],"title":"EyeSide","description":"Ojo evaluado."},"FormaPago":{"type":"string","enum":["Contado","Credito"],"title":"FormaPago","description":"Formas de pago SUNAT."},"FullDentalChartResponse":{"properties":{"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"teeth":{"items":{"$ref":"#/components/schemas/ToothStatus"},"type":"array","title":"Teeth"},"total_entries":{"type":"integer","title":"Total Entries"}},"type":"object","required":["patient_id","teeth","total_entries"],"title":"FullDentalChartResponse","description":"Odontograma completo del paciente — estado actual de todos los dientes."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InventoryItemCreate":{"properties":{"code":{"type":"string","maxLength":50,"minLength":1,"title":"Code","description":"Código interno (SKU)"},"name":{"type":"string","maxLength":300,"minLength":2,"title":"Name"},"category_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Category Id"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"unit":{"type":"string","title":"Unit","description":"Unidad de medida","default":"unidad"},"min_stock":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string"}],"title":"Min Stock","default":"0"},"max_stock":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string"},{"type":"null"}],"title":"Max Stock"},"unit_cost":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string"}],"title":"Unit Cost","default":"0"}},"type":"object","required":["code","name"],"title":"InventoryItemCreate"},"InventoryItemListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/InventoryItemResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"InventoryItemListResponse"},"InventoryItemResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"category_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Category Id"},"code":{"type":"string","title":"Code"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"unit":{"type":"string","title":"Unit"},"current_stock":{"type":"string","title":"Current Stock"},"min_stock":{"type":"string","title":"Min Stock"},"max_stock":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Max Stock"},"unit_cost":{"type":"string","title":"Unit Cost"},"is_active":{"type":"boolean","title":"Is Active"},"category_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category Name"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","clinic_id","code","name","unit","current_stock","min_stock","unit_cost","is_active","created_at","updated_at"],"title":"InventoryItemResponse"},"InventoryItemUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":300,"minLength":2},{"type":"null"}],"title":"Name"},"category_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Category Id"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Unit"},"min_stock":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string"},{"type":"null"}],"title":"Min Stock"},"max_stock":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string"},{"type":"null"}],"title":"Max Stock"},"unit_cost":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string"},{"type":"null"}],"title":"Unit Cost"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"InventoryItemUpdate"},"InventorySummary":{"properties":{"total_items":{"type":"integer","title":"Total Items"},"total_value":{"type":"string","title":"Total Value"},"low_stock_count":{"type":"integer","title":"Low Stock Count"},"out_of_stock_count":{"type":"integer","title":"Out Of Stock Count"}},"type":"object","required":["total_items","total_value","low_stock_count","out_of_stock_count"],"title":"InventorySummary"},"InvoiceCreateSimple":{"properties":{"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"invoice_type":{"type":"string","title":"Invoice Type","description":"factura | boleta | nota_credito | nota_debito"},"ruc_client":{"anyOf":[{"type":"string","maxLength":15},{"type":"null"}],"title":"Ruc Client"},"razon_social":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Razon Social"},"items":{"items":{"$ref":"#/components/schemas/InvoiceItemSimple"},"type":"array","minItems":1,"title":"Items"},"notes":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Notes"},"referenced_invoice_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Referenced Invoice Id"},"motivo_nota":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Motivo Nota"}},"type":"object","required":["patient_id","invoice_type","items"],"title":"InvoiceCreateSimple","description":"Schema simplificado para el frontend.\nEl backend resuelve datos del paciente y mapea invoice_type → tipo_comprobante."},"InvoiceItemResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"description":{"type":"string","title":"Description"},"quantity":{"type":"integer","title":"Quantity"},"unit_code":{"type":"string","title":"Unit Code"},"unit_price":{"type":"string","title":"Unit Price"},"igv_amount":{"type":"string","title":"Igv Amount"},"total":{"type":"string","title":"Total"},"service_type":{"type":"string","title":"Service Type","default":""},"subtotal":{"type":"string","title":"Subtotal","default":"0.00"}},"type":"object","required":["id","description","quantity","unit_code","unit_price","igv_amount","total"],"title":"InvoiceItemResponse"},"InvoiceItemSimple":{"properties":{"service_type":{"type":"string","maxLength":200,"minLength":1,"title":"Service Type"},"description":{"type":"string","maxLength":500,"minLength":1,"title":"Description"},"quantity":{"type":"integer","minimum":1.0,"title":"Quantity","default":1},"unit_price":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string"}],"title":"Unit Price"}},"type":"object","required":["service_type","description","unit_price"],"title":"InvoiceItemSimple","description":"Item simplificado desde el frontend."},"InvoiceListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/InvoiceResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"InvoiceListResponse","description":"Respuesta paginada de listado de comprobantes."},"InvoiceRefEmbed":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"serie":{"type":"string","title":"Serie"},"correlativo":{"type":"integer","title":"Correlativo"},"numero_comprobante":{"type":"string","title":"Numero Comprobante"},"tipo_comprobante":{"$ref":"#/components/schemas/TipoComprobante"},"total":{"type":"string","title":"Total"}},"type":"object","required":["id","serie","correlativo","numero_comprobante","tipo_comprobante","total"],"title":"InvoiceRefEmbed","description":"Datos mínimos del comprobante referenciado (para NC/ND)."},"InvoiceResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"patient_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Patient Id"},"appointment_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Appointment Id"},"created_by":{"type":"string","format":"uuid","title":"Created By"},"tipo_comprobante":{"$ref":"#/components/schemas/TipoComprobante"},"serie":{"type":"string","title":"Serie"},"correlativo":{"type":"integer","title":"Correlativo"},"numero_comprobante":{"type":"string","title":"Numero Comprobante"},"cliente_tipo_doc":{"type":"string","title":"Cliente Tipo Doc"},"cliente_numero_doc":{"type":"string","title":"Cliente Numero Doc"},"cliente_denominacion":{"type":"string","title":"Cliente Denominacion"},"cliente_direccion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cliente Direccion"},"moneda":{"type":"string","title":"Moneda"},"subtotal":{"type":"string","title":"Subtotal"},"igv":{"type":"string","title":"Igv"},"total":{"type":"string","title":"Total"},"forma_pago":{"$ref":"#/components/schemas/FormaPago"},"sunat_status":{"$ref":"#/components/schemas/SunatStatus"},"sunat_error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sunat Error Message"},"pdf_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pdf Url"},"xml_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Xml Url"},"cdr_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cdr Url"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"voided_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voided Reason"},"voided_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Voided At"},"items":{"items":{"$ref":"#/components/schemas/InvoiceItemResponse"},"type":"array","title":"Items","default":[]},"issued_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Issued At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"referenced_invoice_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Referenced Invoice Id"},"motivo_nota":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Motivo Nota"},"referenced_invoice":{"anyOf":[{"$ref":"#/components/schemas/InvoiceRefEmbed"},{"type":"null"}]},"invoice_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Invoice Type"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},"type":"object","required":["id","clinic_id","created_by","tipo_comprobante","serie","correlativo","numero_comprobante","cliente_tipo_doc","cliente_numero_doc","cliente_denominacion","moneda","subtotal","igv","total","forma_pago","sunat_status","created_at","updated_at"],"title":"InvoiceResponse"},"InvoiceVoidRequest":{"properties":{"reason":{"type":"string","maxLength":500,"minLength":5,"title":"Reason","description":"Motivo de anulación"}},"type":"object","required":["reason"],"title":"InvoiceVoidRequest","description":"Request para anular un comprobante."},"LoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","minLength":8,"title":"Password"}},"type":"object","required":["email","password"],"title":"LoginRequest"},"LoginResponse":{"properties":{"user":{"$ref":"#/components/schemas/UserLoginData"},"clinic":{"$ref":"#/components/schemas/ClinicLoginData"},"tokens":{"$ref":"#/components/schemas/TokenData"},"requires_mfa":{"type":"boolean","title":"Requires Mfa","default":false}},"type":"object","required":["user","clinic","tokens"],"title":"LoginResponse"},"LowStockItem":{"properties":{"item_id":{"type":"string","format":"uuid","title":"Item Id"},"code":{"type":"string","title":"Code"},"name":{"type":"string","title":"Name"},"current_stock":{"type":"string","title":"Current Stock"},"min_stock":{"type":"string","title":"Min Stock"},"unit":{"type":"string","title":"Unit"}},"type":"object","required":["item_id","code","name","current_stock","min_stock","unit"],"title":"LowStockItem"},"MFASetupResponse":{"properties":{"secret":{"type":"string","title":"Secret"},"qr_uri":{"type":"string","title":"Qr Uri"}},"type":"object","required":["secret","qr_uri"],"title":"MFASetupResponse"},"MFAVerifyRequest":{"properties":{"code":{"type":"string","maxLength":6,"minLength":6,"title":"Code"},"temp_token":{"type":"string","title":"Temp Token"}},"type":"object","required":["code","temp_token"],"title":"MFAVerifyRequest"},"MedicalRecordCreate":{"properties":{"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"appointment_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Appointment Id"},"record_type":{"$ref":"#/components/schemas/RecordType"},"cie10_codes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Cie10 Codes","description":"Códigos CIE-10: ['J06.9', 'R50.9']"},"content":{"type":"object","title":"Content","description":"Contenido clínico: motivo_consulta, anamnesis, examen_fisico, diagnostico, plan"},"specialty_data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Specialty Data","description":"Datos específicos de especialidad"},"notes":{"anyOf":[{"type":"string","maxLength":5000},{"type":"null"}],"title":"Notes"}},"type":"object","required":["patient_id","record_type","content"],"title":"MedicalRecordCreate"},"MedicalRecordListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/MedicalRecordResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"MedicalRecordListResponse","description":"Respuesta paginada de historial clínico."},"MedicalRecordResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"doctor_id":{"type":"string","format":"uuid","title":"Doctor Id"},"appointment_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Appointment Id"},"record_type":{"$ref":"#/components/schemas/RecordType"},"cie10_codes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Cie10 Codes"},"content":{"type":"object","title":"Content"},"specialty_data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Specialty Data"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"signed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Signed At"},"signed_by":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Signed By"},"is_signed":{"type":"boolean","title":"Is Signed","default":false},"doctor_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Doctor Name"},"patient_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Patient Name"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","clinic_id","patient_id","doctor_id","record_type","content","created_at"],"title":"MedicalRecordResponse"},"MovementCategory":{"type":"string","enum":["patient_payment","other_income","supplier_payment","petty_cash","refund","salary","other_expense"],"title":"MovementCategory","description":"Categoría del movimiento."},"MovementType":{"type":"string","enum":["income","expense"],"title":"MovementType","description":"Tipo de movimiento: ingreso o egreso."},"OphthalmicExamCreate":{"properties":{"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"record_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Record Id"},"eye":{"$ref":"#/components/schemas/EyeSide"},"visual_acuity_uncorrected":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Visual Acuity Uncorrected"},"visual_acuity_corrected":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Visual Acuity Corrected"},"sphere":{"anyOf":[{"type":"number","maximum":20.0,"minimum":-20.0},{"type":"null"}],"title":"Sphere","description":"Esfera (dioptrías)"},"cylinder":{"anyOf":[{"type":"number","maximum":10.0,"minimum":-10.0},{"type":"null"}],"title":"Cylinder","description":"Cilindro (dioptrías)"},"axis":{"anyOf":[{"type":"integer","maximum":180.0,"minimum":0.0},{"type":"null"}],"title":"Axis","description":"Eje (grados)"},"addition":{"anyOf":[{"type":"number","maximum":4.0,"minimum":0.0},{"type":"null"}],"title":"Addition","description":"Adición presbicia"},"iop":{"anyOf":[{"type":"number","maximum":80.0,"minimum":0.0},{"type":"null"}],"title":"Iop","description":"PIO (mmHg)"},"extra_data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Extra Data","description":"Fondo de ojo, biomicroscopía, etc."},"notes":{"anyOf":[{"type":"string","maxLength":5000},{"type":"null"}],"title":"Notes"}},"type":"object","required":["patient_id","eye"],"title":"OphthalmicExamCreate"},"OphthalmicExamResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"record_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Record Id"},"doctor_id":{"type":"string","format":"uuid","title":"Doctor Id"},"eye":{"$ref":"#/components/schemas/EyeSide"},"visual_acuity_uncorrected":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Visual Acuity Uncorrected"},"visual_acuity_corrected":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Visual Acuity Corrected"},"sphere":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Sphere"},"cylinder":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cylinder"},"axis":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Axis"},"addition":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Addition"},"iop":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Iop"},"extra_data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Extra Data"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"doctor_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Doctor Name"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","clinic_id","patient_id","doctor_id","eye","created_at"],"title":"OphthalmicExamResponse"},"OphthalmicHistoryResponse":{"properties":{"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"exams":{"items":{"$ref":"#/components/schemas/OphthalmicExamResponse"},"type":"array","title":"Exams"},"total_exams":{"type":"integer","title":"Total Exams"}},"type":"object","required":["patient_id","exams","total_exams"],"title":"OphthalmicHistoryResponse","description":"Historial oftalmológico completo de un paciente."},"OrganizationCreate":{"properties":{"name":{"type":"string","maxLength":200,"minLength":2,"title":"Name","description":"Nombre del grupo empresarial"},"ruc":{"type":"string","maxLength":11,"minLength":11,"pattern":"^\\d{11}$","title":"Ruc","description":"RUC de la organización"},"plan_type":{"$ref":"#/components/schemas/PlanType","description":"Plan de suscripción","default":"basic"},"max_clinics":{"type":"integer","minimum":1.0,"title":"Max Clinics","description":"Máximo de sedes permitidas","default":1},"contact_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Email"},"contact_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Phone"}},"type":"object","required":["name","ruc"],"title":"OrganizationCreate","description":"Crear una nueva organización."},"OrganizationResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"ruc":{"type":"string","title":"Ruc"},"plan_type":{"$ref":"#/components/schemas/PlanType"},"max_clinics":{"type":"integer","title":"Max Clinics"},"contact_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Email"},"contact_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Phone"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","name","ruc","plan_type","max_clinics","is_active","created_at","updated_at"],"title":"OrganizationResponse","description":"Respuesta de organización."},"OrganizationUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":200,"minLength":2},{"type":"null"}],"title":"Name"},"plan_type":{"anyOf":[{"$ref":"#/components/schemas/PlanType"},{"type":"null"}]},"max_clinics":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Max Clinics"},"contact_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Email"},"contact_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Phone"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"OrganizationUpdate","description":"Actualizar una organización existente."},"OrganizationWithClinicsResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"ruc":{"type":"string","title":"Ruc"},"plan_type":{"$ref":"#/components/schemas/PlanType"},"max_clinics":{"type":"integer","title":"Max Clinics"},"contact_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Email"},"contact_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Phone"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"clinics":{"items":{"$ref":"#/components/schemas/ClinicBranchResponse"},"type":"array","title":"Clinics","default":[]}},"type":"object","required":["id","name","ruc","plan_type","max_clinics","is_active","created_at","updated_at"],"title":"OrganizationWithClinicsResponse","description":"Respuesta de organización con sus clínicas."},"PatientCreate":{"properties":{"dni":{"type":"string","maxLength":15,"minLength":8,"title":"Dni","description":"DNI o documento de identidad"},"first_name":{"type":"string","maxLength":100,"minLength":2,"title":"First Name"},"last_name":{"type":"string","maxLength":100,"minLength":2,"title":"Last Name"},"birth_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Birth Date"},"gender":{"anyOf":[{"type":"string","pattern":"^(masculino|femenino|otro)$"},{"type":"null"}],"title":"Gender"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"address":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Address"},"blood_type":{"anyOf":[{"type":"string","pattern":"^(A|B|AB|O)[+-]$"},{"type":"null"}],"title":"Blood Type","description":"Tipo de sangre: A+, A-, B+, B-, O+, O-, AB+, AB-"},"allergies":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Allergies","description":"Lista de alergias: [{\"name\": \"...\", \"severity\": \"leve|moderada|severa\"}]"},"emergency_contact_name":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Emergency Contact Name"},"emergency_contact_phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Emergency Contact Phone"},"notes":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Notes"}},"type":"object","required":["dni","first_name","last_name"],"title":"PatientCreate"},"PatientListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/PatientResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"PatientListResponse","description":"Respuesta paginada de listado de pacientes."},"PatientResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"dni":{"type":"string","title":"Dni"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"full_name":{"type":"string","title":"Full Name"},"birth_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Birth Date"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"blood_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Blood Type"},"allergies":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Allergies"},"emergency_contact_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Emergency Contact Name"},"emergency_contact_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Emergency Contact Phone"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","clinic_id","dni","first_name","last_name","full_name","is_active","created_at","updated_at"],"title":"PatientResponse"},"PatientUpdate":{"properties":{"first_name":{"anyOf":[{"type":"string","maxLength":100,"minLength":2},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string","maxLength":100,"minLength":2},{"type":"null"}],"title":"Last Name"},"birth_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Birth Date"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"address":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Address"},"blood_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Blood Type"},"allergies":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Allergies"},"emergency_contact_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Emergency Contact Name"},"emergency_contact_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Emergency Contact Phone"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"PatientUpdate"},"PaymentMethod":{"type":"string","enum":["cash","card","transfer","yape_plin","other"],"title":"PaymentMethod","description":"Método de pago del movimiento."},"PlanType":{"type":"string","enum":["basic","professional","enterprise"],"title":"PlanType","description":"Tipos de plan de suscripción SaaS."},"PrenatalHistoryResponse":{"properties":{"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"visits":{"items":{"$ref":"#/components/schemas/PrenatalVisitResponse"},"type":"array","title":"Visits"},"total_visits":{"type":"integer","title":"Total Visits"}},"type":"object","required":["patient_id","visits","total_visits"],"title":"PrenatalHistoryResponse","description":"Historial prenatal completo de una paciente."},"PrenatalVisitCreate":{"properties":{"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"record_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Record Id"},"gestational_week":{"type":"integer","maximum":45.0,"minimum":1.0,"title":"Gestational Week","description":"Semana de gestación"},"weight":{"anyOf":[{"type":"number","maximum":300.0,"exclusiveMinimum":0.0},{"type":"null"}],"title":"Weight","description":"Peso en kg"},"blood_pressure_systolic":{"anyOf":[{"type":"integer","maximum":300.0,"minimum":50.0},{"type":"null"}],"title":"Blood Pressure Systolic","description":"PA sistólica (mmHg)"},"blood_pressure_diastolic":{"anyOf":[{"type":"integer","maximum":200.0,"minimum":30.0},{"type":"null"}],"title":"Blood Pressure Diastolic","description":"PA diastólica (mmHg)"},"uterine_height":{"anyOf":[{"type":"number","maximum":50.0,"minimum":0.0},{"type":"null"}],"title":"Uterine Height","description":"Altura uterina (cm)"},"fetal_heart_rate":{"anyOf":[{"type":"integer","maximum":220.0,"minimum":60.0},{"type":"null"}],"title":"Fetal Heart Rate","description":"FCF (lpm)"},"presentation":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Presentation"},"fetal_movements":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Fetal Movements"},"edema":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Edema"},"labs":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Labs","description":"Laboratorios: hemoglobina, glucosa, orina, etc."},"notes":{"anyOf":[{"type":"string","maxLength":5000},{"type":"null"}],"title":"Notes"},"next_appointment_notes":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Next Appointment Notes"}},"type":"object","required":["patient_id","gestational_week"],"title":"PrenatalVisitCreate"},"PrenatalVisitResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"record_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Record Id"},"doctor_id":{"type":"string","format":"uuid","title":"Doctor Id"},"gestational_week":{"type":"integer","title":"Gestational Week"},"weight":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Weight"},"blood_pressure_systolic":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Blood Pressure Systolic"},"blood_pressure_diastolic":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Blood Pressure Diastolic"},"blood_pressure":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Blood Pressure"},"uterine_height":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Uterine Height"},"fetal_heart_rate":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Fetal Heart Rate"},"presentation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Presentation"},"fetal_movements":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Fetal Movements"},"edema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Edema"},"labs":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Labs"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"next_appointment_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Appointment Notes"},"doctor_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Doctor Name"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","clinic_id","patient_id","doctor_id","gestational_week","created_at"],"title":"PrenatalVisitResponse"},"PublicBookingRequest":{"properties":{"doctor_id":{"type":"string","format":"uuid","title":"Doctor Id"},"start_time":{"type":"string","format":"date-time","title":"Start Time"},"end_time":{"type":"string","format":"date-time","title":"End Time"},"service_type":{"type":"string","maxLength":100,"minLength":2,"title":"Service Type"},"notes":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Notes"},"patient_dni":{"type":"string","maxLength":15,"minLength":8,"title":"Patient Dni"},"patient_first_name":{"type":"string","maxLength":100,"minLength":2,"title":"Patient First Name"},"patient_last_name":{"type":"string","maxLength":100,"minLength":2,"title":"Patient Last Name"},"patient_phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Patient Phone"},"patient_email":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Patient Email"}},"type":"object","required":["doctor_id","start_time","end_time","service_type","patient_dni","patient_first_name","patient_last_name"],"title":"PublicBookingRequest","description":"Schema para reserva desde el link público (sin autenticación)."},"PublicBookingResponse":{"properties":{"appointment_id":{"type":"string","format":"uuid","title":"Appointment Id"},"patient_id":{"type":"string","format":"uuid","title":"Patient Id"},"status":{"$ref":"#/components/schemas/AppointmentStatus"},"start_time":{"type":"string","format":"date-time","title":"Start Time"},"end_time":{"type":"string","format":"date-time","title":"End Time"},"doctor_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Doctor Name"},"message":{"type":"string","title":"Message","default":"Cita reservada exitosamente"}},"type":"object","required":["appointment_id","patient_id","status","start_time","end_time"],"title":"PublicBookingResponse"},"RecordType":{"type":"string","enum":["consultation","control","emergency","procedure","dental","prenatal","ophthalmic","lab_result","imaging","note"],"title":"RecordType","description":"Tipos de registro clínico."},"RefreshRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshRequest"},"RegisterResponse":{"properties":{"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"email":{"type":"string","title":"Email"},"message":{"type":"string","title":"Message","default":"Registro exitoso"}},"type":"object","required":["clinic_id","user_id","email"],"title":"RegisterResponse"},"ReniecDNIResponse":{"properties":{"dni":{"type":"string","title":"Dni","description":"Número de DNI consultado","examples":["12345678"]},"nombres":{"type":"string","title":"Nombres","description":"Nombres de la persona","examples":["JUAN CARLOS"]},"apellido_paterno":{"type":"string","title":"Apellido Paterno","description":"Apellido paterno","examples":["PÉREZ"]},"apellido_materno":{"type":"string","title":"Apellido Materno","description":"Apellido materno","examples":["GARCÍA"]},"nombre_completo":{"type":"string","title":"Nombre Completo","description":"Nombre completo (apellidos + nombres)","examples":["PÉREZ GARCÍA JUAN CARLOS"]}},"type":"object","required":["dni","nombres","apellido_paterno","apellido_materno","nombre_completo"],"title":"ReniecDNIResponse","description":"Respuesta de consulta DNI a RENIEC."},"RevenuePeriod":{"properties":{"period":{"type":"string","title":"Period"},"subtotal":{"type":"string","title":"Subtotal","default":"0.00"},"igv":{"type":"string","title":"Igv","default":"0.00"},"total":{"type":"string","title":"Total","default":"0.00"},"invoice_count":{"type":"integer","title":"Invoice Count","default":0}},"type":"object","required":["period"],"title":"RevenuePeriod","description":"Ingresos agrupados por período."},"RevenueReportResponse":{"properties":{"date_from":{"type":"string","format":"date","title":"Date From"},"date_to":{"type":"string","format":"date","title":"Date To"},"periods":{"items":{"$ref":"#/components/schemas/RevenuePeriod"},"type":"array","title":"Periods"},"grand_total":{"type":"string","title":"Grand Total","default":"0.00"},"grand_subtotal":{"type":"string","title":"Grand Subtotal","default":"0.00"},"grand_igv":{"type":"string","title":"Grand Igv","default":"0.00"},"total_invoices":{"type":"integer","title":"Total Invoices","default":0}},"type":"object","required":["date_from","date_to","periods"],"title":"RevenueReportResponse","description":"Reporte de ingresos por período."},"ServiceCreate":{"properties":{"name":{"type":"string","maxLength":150,"minLength":1,"title":"Name","description":"Nombre del servicio"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"duration_minutes":{"type":"integer","maximum":480.0,"minimum":5.0,"title":"Duration Minutes","description":"Duración en minutos","default":30},"price":{"type":"number","minimum":0.0,"title":"Price","description":"Precio en PEN","default":0.0},"color":{"anyOf":[{"type":"string","pattern":"^#[0-9a-fA-F]{6}$"},{"type":"null"}],"title":"Color","description":"Color hex"},"is_active":{"type":"boolean","title":"Is Active","default":true}},"type":"object","required":["name"],"title":"ServiceCreate"},"ServiceListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/ServiceResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"ServiceListResponse"},"ServiceResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"duration_minutes":{"type":"integer","title":"Duration Minutes"},"price":{"type":"number","title":"Price"},"color":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Color"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","clinic_id","name","duration_minutes","price","is_active","created_at","updated_at"],"title":"ServiceResponse"},"ServiceUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":150,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"duration_minutes":{"anyOf":[{"type":"integer","maximum":480.0,"minimum":5.0},{"type":"null"}],"title":"Duration Minutes"},"price":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Price"},"color":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Color"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"ServiceUpdate"},"SignRecordRequest":{"properties":{"confirm":{"type":"boolean","title":"Confirm","description":"Debe ser true para confirmar la firma. Una vez firmado, el registro es INMUTABLE."}},"type":"object","required":["confirm"],"title":"SignRecordRequest","description":"Confirma la firma digital de un registro clínico."},"StockMovementCreate":{"properties":{"item_id":{"type":"string","format":"uuid","title":"Item Id"},"movement_type":{"type":"string","title":"Movement Type","description":"entry, exit, adjustment"},"reason":{"type":"string","title":"Reason","description":"Razón del movimiento"},"quantity":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string"}],"title":"Quantity","description":"Cantidad (siempre positiva)"},"unit_cost":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string"},{"type":"null"}],"title":"Unit Cost"},"supplier_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Supplier Id"},"reference":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Reference"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","required":["item_id","movement_type","reason","quantity"],"title":"StockMovementCreate"},"StockMovementListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/StockMovementResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"StockMovementListResponse"},"StockMovementResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"item_id":{"type":"string","format":"uuid","title":"Item Id"},"created_by":{"type":"string","format":"uuid","title":"Created By"},"movement_type":{"type":"string","title":"Movement Type"},"reason":{"type":"string","title":"Reason"},"quantity":{"type":"string","title":"Quantity"},"unit_cost":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Unit Cost"},"total_cost":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Total Cost"},"stock_before":{"type":"string","title":"Stock Before"},"stock_after":{"type":"string","title":"Stock After"},"supplier_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Supplier Id"},"reference":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reference"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"item_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Item Name"},"item_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Item Code"},"supplier_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier Name"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","clinic_id","item_id","created_by","movement_type","reason","quantity","stock_before","stock_after","created_at"],"title":"StockMovementResponse"},"SunatStatus":{"type":"string","enum":["pending","queued","emitted","accepted","rejected","voided","error"],"title":"SunatStatus","description":"Estados del comprobante frente a SUNAT."},"SupplierCreate":{"properties":{"ruc":{"type":"string","maxLength":11,"minLength":11,"title":"Ruc","description":"RUC del proveedor"},"business_name":{"type":"string","maxLength":300,"minLength":2,"title":"Business Name","description":"Razón social"},"contact_name":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Contact Name"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Email"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","required":["ruc","business_name"],"title":"SupplierCreate"},"SupplierListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/SupplierResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"SupplierListResponse"},"SupplierResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"ruc":{"type":"string","title":"Ruc"},"business_name":{"type":"string","title":"Business Name"},"contact_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Name"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","clinic_id","ruc","business_name","is_active","created_at","updated_at"],"title":"SupplierResponse"},"SupplierUpdate":{"properties":{"business_name":{"anyOf":[{"type":"string","maxLength":300,"minLength":2},{"type":"null"}],"title":"Business Name"},"contact_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Name"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Email"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"SupplierUpdate"},"SwitchClinicRequest":{"properties":{"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id","description":"ID de la sede a la que cambiar"}},"type":"object","required":["clinic_id"],"title":"SwitchClinicRequest","description":"Request para cambiar de sede activa."},"SwitchClinicResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"refresh_token":{"type":"string","title":"Refresh Token"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"clinic_name":{"type":"string","title":"Clinic Name"}},"type":"object","required":["access_token","refresh_token","clinic_id","clinic_name"],"title":"SwitchClinicResponse","description":"Tokens nuevos con la sede seleccionada."},"SyncApplied":{"properties":{"local_id":{"type":"string","title":"Local Id"},"server_id":{"type":"string","title":"Server Id"},"entity":{"type":"string","title":"Entity"},"action":{"type":"string","title":"Action"},"status":{"type":"string","title":"Status","default":"applied"}},"type":"object","required":["local_id","server_id","entity","action"],"title":"SyncApplied","description":"Resultado de una operación aplicada exitosamente."},"SyncBatch":{"properties":{"device_id":{"type":"string","maxLength":100,"minLength":1,"title":"Device Id","description":"Identificador único del dispositivo"},"operations":{"items":{"$ref":"#/components/schemas/SyncOperation"},"type":"array","maxItems":500,"minItems":1,"title":"Operations","description":"Operaciones a sincronizar (máximo 500 por batch)"},"last_sync":{"type":"string","format":"date-time","title":"Last Sync","description":"Timestamp de la última sincronización exitosa del dispositivo"}},"type":"object","required":["device_id","operations","last_sync"],"title":"SyncBatch","description":"Batch de operaciones enviado desde un dispositivo offline."},"SyncConflict":{"properties":{"local_id":{"type":"string","title":"Local Id"},"entity":{"type":"string","title":"Entity"},"action":{"type":"string","title":"Action"},"status":{"type":"string","title":"Status","default":"conflict"},"reason":{"type":"string","title":"Reason"},"server_version":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Server Version","description":"Versión actual del registro en el servidor"}},"type":"object","required":["local_id","entity","action","reason"],"title":"SyncConflict","description":"Detalle de un conflicto detectado durante la sincronización."},"SyncError":{"properties":{"local_id":{"type":"string","title":"Local Id"},"entity":{"type":"string","title":"Entity"},"action":{"type":"string","title":"Action"},"status":{"type":"string","title":"Status","default":"error"},"error":{"type":"string","title":"Error"}},"type":"object","required":["local_id","entity","action","error"],"title":"SyncError","description":"Detalle de una operación que falló."},"SyncOperation":{"properties":{"entity":{"type":"string","enum":["patient","appointment","record","dental_chart","prenatal_visit","ophthalmic_exam","invoice"],"title":"Entity"},"action":{"type":"string","enum":["create","update"],"title":"Action"},"local_id":{"type":"string","title":"Local Id","description":"UUID generado en el cliente para la entidad"},"data":{"type":"object","title":"Data","description":"Payload de la entidad (los mismos campos del schema Create/Update)"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Momento en que se realizó la operación en el dispositivo"}},"type":"object","required":["entity","action","local_id","data","timestamp"],"title":"SyncOperation","description":"Una operación creada offline en el dispositivo."},"SyncResponse":{"properties":{"batch_id":{"type":"string","format":"uuid","title":"Batch Id","description":"ID del batch procesado (para tracking)"},"applied":{"items":{"$ref":"#/components/schemas/SyncApplied"},"type":"array","title":"Applied","description":"Operaciones aplicadas exitosamente","default":[]},"conflicts":{"items":{"$ref":"#/components/schemas/SyncConflict"},"type":"array","title":"Conflicts","description":"Operaciones con conflictos (resueltos por last-write-wins)","default":[]},"errors":{"items":{"$ref":"#/components/schemas/SyncError"},"type":"array","title":"Errors","description":"Operaciones que fallaron","default":[]},"updates":{"items":{"$ref":"#/components/schemas/SyncServerUpdate"},"type":"array","title":"Updates","description":"Cambios del servidor desde la última sincronización del dispositivo","default":[]},"server_time":{"type":"string","format":"date-time","title":"Server Time","description":"Timestamp del servidor al procesar (usar como last_sync en el próximo batch)"},"summary":{"type":"string","title":"Summary","default":""}},"type":"object","required":["batch_id","server_time"],"title":"SyncResponse","description":"Respuesta del endpoint de sincronización."},"SyncServerUpdate":{"properties":{"entity":{"type":"string","title":"Entity"},"server_id":{"type":"string","title":"Server Id"},"action":{"type":"string","enum":["create","update","delete"],"title":"Action"},"data":{"type":"object","title":"Data"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["entity","server_id","action","data","updated_at"],"title":"SyncServerUpdate","description":"Un registro que cambió en el servidor desde la última sincronización."},"SyncStatusResponse":{"properties":{"device_id":{"type":"string","title":"Device Id"},"last_sync":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Sync"},"pending_batches":{"type":"integer","title":"Pending Batches","default":0},"total_mappings":{"type":"integer","title":"Total Mappings","default":0}},"type":"object","required":["device_id"],"title":"SyncStatusResponse","description":"Estado de sincronización de un dispositivo."},"TimeSlot":{"properties":{"start_time":{"type":"string","format":"date-time","title":"Start Time"},"end_time":{"type":"string","format":"date-time","title":"End Time"},"available":{"type":"boolean","title":"Available","default":true}},"type":"object","required":["start_time","end_time"],"title":"TimeSlot","description":"Un slot de tiempo disponible para agendar."},"TipoComprobante":{"type":"string","enum":["01","03","07","08"],"title":"TipoComprobante","description":"Tipos de comprobante SUNAT."},"TokenData":{"properties":{"access_token":{"type":"string","title":"Access Token"},"refresh_token":{"type":"string","title":"Refresh Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token","refresh_token"],"title":"TokenData"},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"refresh_token":{"type":"string","title":"Refresh Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token","refresh_token"],"title":"TokenResponse"},"ToothCondition":{"type":"string","enum":["healthy","caries","filled","extracted","missing","crown","bridge","implant","root_canal","fracture","sealant","temporary"],"title":"ToothCondition","description":"Condiciones dentales estándar."},"ToothStatus":{"properties":{"tooth_number":{"type":"integer","title":"Tooth Number"},"condition":{"$ref":"#/components/schemas/ToothCondition"},"surfaces":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Surfaces"},"treatment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Treatment"},"last_updated":{"type":"string","format":"date-time","title":"Last Updated"},"history_count":{"type":"integer","title":"History Count","default":0}},"type":"object","required":["tooth_number","condition","last_updated"],"title":"ToothStatus","description":"Estado actual de un diente (último registro)."},"UserClinicAccessCreate":{"properties":{"user_id":{"type":"string","format":"uuid","title":"User Id","description":"ID del usuario"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id","description":"ID de la sede"},"role_in_clinic":{"type":"string","title":"Role In Clinic","description":"Rol del usuario en esta sede"}},"type":"object","required":["user_id","clinic_id","role_in_clinic"],"title":"UserClinicAccessCreate","description":"Otorgar acceso a un usuario a una sede."},"UserClinicAccessResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"role_in_clinic":{"type":"string","title":"Role In Clinic"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","user_id","clinic_id","role_in_clinic","is_active","created_at"],"title":"UserClinicAccessResponse","description":"Respuesta de acceso de usuario a sede."},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"first_name":{"type":"string","maxLength":100,"minLength":2,"title":"First Name"},"last_name":{"type":"string","maxLength":100,"minLength":2,"title":"Last Name"},"role":{"$ref":"#/components/schemas/UserRole","default":"receptionist"},"cmp_number":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Cmp Number"},"specialty":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Specialty"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone"},"password":{"type":"string","maxLength":128,"minLength":8,"title":"Password"}},"type":"object","required":["email","first_name","last_name","password"],"title":"UserCreate"},"UserListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/UserResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"UserListResponse"},"UserLoginData":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"email":{"type":"string","title":"Email"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"full_name":{"type":"string","title":"Full Name"},"role":{"$ref":"#/components/schemas/UserRole"},"is_mfa_enabled":{"type":"boolean","title":"Is Mfa Enabled"}},"type":"object","required":["id","email","first_name","last_name","full_name","role","is_mfa_enabled"],"title":"UserLoginData"},"UserMe":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"email":{"type":"string","title":"Email"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"full_name":{"type":"string","title":"Full Name"},"role":{"$ref":"#/components/schemas/UserRole"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"clinic_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Clinic Name"},"is_mfa_enabled":{"type":"boolean","title":"Is Mfa Enabled"}},"type":"object","required":["id","email","first_name","last_name","full_name","role","clinic_id","is_mfa_enabled"],"title":"UserMe","description":"Respuesta para el endpoint /me con datos de la clínica."},"UserResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"clinic_id":{"type":"string","format":"uuid","title":"Clinic Id"},"email":{"type":"string","title":"Email"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"full_name":{"type":"string","title":"Full Name"},"role":{"$ref":"#/components/schemas/UserRole"},"cmp_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cmp Number"},"specialty":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Specialty"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"is_mfa_enabled":{"type":"boolean","title":"Is Mfa Enabled"},"is_active":{"type":"boolean","title":"Is Active"},"last_login":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","clinic_id","email","first_name","last_name","full_name","role","is_mfa_enabled","is_active","created_at","updated_at"],"title":"UserResponse"},"UserRole":{"type":"string","enum":["super_admin","org_admin","clinic_admin","doctor","receptionist"],"title":"UserRole","description":"Roles del sistema con permisos jerárquicos."},"UserUpdate":{"properties":{"first_name":{"anyOf":[{"type":"string","maxLength":100,"minLength":2},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string","maxLength":100,"minLength":2},{"type":"null"}],"title":"Last Name"},"role":{"anyOf":[{"$ref":"#/components/schemas/UserRole"},{"type":"null"}]},"cmp_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cmp Number"},"specialty":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Specialty"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"UserUpdate"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}